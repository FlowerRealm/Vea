appId: com.vea.app
productName: Vea
executableName: Vea
copyright: Copyright © 2025 FlowerRealm

# 默认文件命名格式: Vea-版本-系统-架构.扩展名（系统名按平台固定为 linux/macos/windows）

# 说明：应用内自动更新使用 electron-updater（GenericProvider），更新资源托管在 GitHub Pages。
# 需要把安装包与 latest*.yml 放到同一目录（见 .github/workflows/release.yml 的 Pages 部署）。
publish:
  provider: generic
  url: https://flowerrealm.github.io/Vea/updates

directories:
  # electron-builder 的中间产物（*-unpacked、builder-*.yml、latest*.yml 等）会落在 output 目录。
  # 这里固定输出到 dist，最终 release/ 仅保留安装包（由 Makefile / CI 收集）。
  output: ../dist/electron

files:
  - main.js
  - theme_manager.js
  - preload.js
  - settings-schema.js
  - chain-editor/**/*
  - theme/**/*
  - assets/**/*
  - sdk/dist/**/*
  - "!**/*.map"

mac:
  target:
    - dmg
    - zip
  artifactName: "${productName}-${version}-macos-${arch}.${ext}"
  # arch 由命令行参数控制 (--x64 或 --arm64)
  category: public.app-category.utilities
  icon: assets/icon.icns
  entitlements: entitlements.mac.plist
  entitlementsInherit: entitlements.mac.plist
  extraResources:
    - from: ../vea
      to: vea

linux:
  target: deb
  artifactName: "${productName}-${version}-linux-${arch}.${ext}"
  # arch 由命令行参数控制 (--x64 或 --arm64)
  category: Network
  icon: assets/icons
  maintainer: FlowerRealm <flower_realm@outlook.com>
  extraResources:
    - from: ../vea
      to: vea
    - from: ../scripts
      to: scripts
      filter:
        - "**/*"

deb:
  # deb 安装/卸载时同步安装管理员模式入口（pkexec wrapper + polkit policy + desktop entry）
  afterInstall: ../scripts/install-linux-admin.sh
  afterRemove: ../scripts/uninstall-linux-admin.sh

win:
  target:
    - target: nsis
      arch:
        - x64
    - target: zip
      arch:
        - x64
  artifactName: "${productName}-${version}-windows-${arch}.${ext}"
  icon: assets/icon.ico
  requestedExecutionLevel: requireAdministrator
  extraResources:
    - from: ../vea.exe
      to: vea.exe

nsis:
  artifactName: "${productName}-${version}-windows-${arch}.${ext}"
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: always
  createStartMenuShortcut: true
  shortcutName: Vea
  # 禁用差分更新：避免生成/依赖 *.blockmap
  differentialPackage: false
