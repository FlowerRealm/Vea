<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vea 控制面 - 深色</title>
    <style>
      /* Vea Console - Dark Theme */
      :root {
        /* Colors */
        --bg-primary: #0a0a0a;
        --bg-secondary: #1a1a1a;
        --bg-tertiary: #2a2a2a;
        --bg-elevated: #1e1e1e;

        --text-primary: #e5e7eb;
        --text-secondary: #9ca3af;
        --text-tertiary: #6b7280;

        --accent-primary: #3b82f6;
        --accent-secondary: #8b5cf6;
        --accent-hover: #2563eb;

        --border-color: rgba(255, 255, 255, 0.1);
        --border-focus: rgba(59, 130, 246, 0.5);

        --success: #10b981;
        --warning: #f59e0b;
        --error: #ef4444;

        --titlebar-bg: #0f0f0f;
        --sidebar-bg: rgba(26, 26, 26, 0.95);
        --card-bg: rgba(30, 30, 30, 0.8);

        /* Shadows */
        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.5);
        --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
        --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3);
        --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.5), 0 10px 10px -5px rgba(0, 0, 0, 0.4);

        /* Spacing */
        --space-xs: 4px;
        --space-sm: 8px;
        --space-md: 16px;
        --space-lg: 24px;
        --space-xl: 32px;

        /* Border radius */
        --radius-sm: 6px;
        --radius-md: 12px;
        --radius-lg: 16px;
        --radius-full: 9999px;

        /* Transitions */
        --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
        --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        line-height: 1.6;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        height: 100vh;
      }

      /* Titlebar */
      .titlebar {
        height: 40px;
        background: var(--titlebar-bg);
        border-bottom: 1px solid var(--border-color);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 var(--space-md);
        -webkit-app-region: drag;
        user-select: none;
        flex-shrink: 0;
      }

      .titlebar-title {
        font-size: 13px;
        font-weight: 600;
        color: var(--text-secondary);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
      }

      .titlebar-logo {
        width: 16px;
        height: 16px;
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        border-radius: var(--radius-sm);
      }

      .titlebar-controls {
        display: flex;
        gap: var(--space-xs);
        -webkit-app-region: no-drag;
      }

      .titlebar-button {
        width: 36px;
        height: 28px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: var(--radius-sm);
        color: var(--text-secondary);
        cursor: pointer;
        transition: all var(--transition-fast);
      }

      .titlebar-button:hover {
        background: rgba(255, 255, 255, 0.08);
        color: var(--text-primary);
      }

      .titlebar-button:active {
        background: rgba(255, 255, 255, 0.12);
        transform: scale(0.96);
      }

      .titlebar-button.close:hover {
        background: var(--error);
        color: white;
      }

      /* App Container */
      .app-container {
        display: flex;
        flex: 1;
        overflow: hidden;
      }

      /* Sidebar */
      .sidebar {
        width: 260px;
        background: var(--sidebar-bg);
        border-right: 1px solid var(--border-color);
        display: flex;
        flex-direction: column;
        backdrop-filter: blur(20px);
        flex-shrink: 0;
      }

      .brand {
        padding: var(--space-lg) var(--space-md);
        font-size: 18px;
        font-weight: 700;
        letter-spacing: -0.02em;
        background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      .menu {
        flex: 1;
        padding: var(--space-sm);
        display: flex;
        flex-direction: column;
        gap: var(--space-xs);
        overflow-y: auto;
      }

      .menu button {
        all: unset;
        padding: var(--space-md);
        border-radius: var(--radius-md);
        font-size: 14px;
        font-weight: 500;
        color: var(--text-secondary);
        cursor: pointer;
        transition: all var(--transition-base);
        position: relative;
        overflow: hidden;
      }

      .menu button::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        width: 3px;
        height: 100%;
        background: var(--accent-primary);
        transform: scaleY(0);
        transition: transform var(--transition-base);
      }

      .menu button:hover {
        background: rgba(255, 255, 255, 0.05);
        color: var(--text-primary);
      }

      .menu button.active {
        background: rgba(59, 130, 246, 0.15);
        color: var(--accent-primary);
      }

      .menu button.active::before {
        transform: scaleY(1);
      }

      /* Main Content */
      main {
        flex: 1;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        background: var(--bg-primary);
      }

      .status-bar {
        padding: var(--space-md);
        background: var(--bg-secondary);
        border-bottom: 1px solid var(--border-color);
        font-size: 13px;
        color: var(--text-secondary);
        opacity: 0;
        transform: translateY(-100%);
        transition: all var(--transition-base);
      }

      .status-bar.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .status-bar.success {
        background: rgba(16, 185, 129, 0.15);
        color: var(--success);
        border-color: rgba(16, 185, 129, 0.3);
      }

      .status-bar.error {
        background: rgba(239, 68, 68, 0.15);
        color: var(--error);
        border-color: rgba(239, 68, 68, 0.3);
      }

      .status-bar.info {
        background: rgba(59, 130, 246, 0.15);
        color: var(--accent-primary);
        border-color: rgba(59, 130, 246, 0.3);
      }

      /* Panel */
      .panel {
        display: none;
        flex-direction: column;
        flex: 1;
        overflow: hidden;
      }

      .panel.active {
        display: flex;
      }

      .panel-header {
        padding: var(--space-xl) var(--space-xl) var(--space-lg);
        background: linear-gradient(180deg, var(--bg-secondary) 0%, transparent 100%);
      }

      .panel-header h2 {
        font-size: 28px;
        font-weight: 700;
        margin-bottom: var(--space-sm);
        letter-spacing: -0.03em;
      }

      .panel-header p {
        color: var(--text-secondary);
        font-size: 14px;
      }

      .panel-body {
        flex: 1;
        padding: var(--space-md) var(--space-xl);
        overflow-y: auto;
      }

      /* Cards */
      .card, .node-card, .config-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: var(--space-lg);
        margin-bottom: var(--space-md);
        backdrop-filter: blur(10px);
        transition: all var(--transition-base);
      }

      .card:hover, .node-card:hover, .config-card:hover {
        border-color: rgba(255, 255, 255, 0.2);
        box-shadow: var(--shadow-md);
      }

      /* Buttons */
      button, .btn {
        all: unset;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: var(--space-sm);
        padding: var(--space-sm) var(--space-md);
        border-radius: var(--radius-md);
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all var(--transition-base);
        background: rgba(255, 255, 255, 0.08);
        color: var(--text-primary);
        border: 1px solid transparent;
      }

      button:hover, .btn:hover {
        background: rgba(255, 255, 255, 0.12);
        transform: translateY(-1px);
      }

      button:active, .btn:active {
        transform: translateY(0);
      }

      button.primary, .btn-primary {
        background: var(--accent-primary);
        color: white;
      }

      button.primary:hover, .btn-primary:hover {
        background: var(--accent-hover);
        box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
      }

      button.danger {
        background: rgba(239, 68, 68, 0.15);
        color: var(--error);
      }

      button.danger:hover {
        background: var(--error);
        color: white;
      }

      button.success {
        background: rgba(16, 185, 129, 0.15);
        color: var(--success);
      }

      button.success:hover {
        background: var(--success);
        color: white;
      }

      button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none !important;
      }

      /* Inputs */
      input, select, textarea {
        width: 100%;
        padding: var(--space-md);
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-md);
        color: var(--text-primary);
        font-size: 14px;
        font-family: inherit;
        transition: all var(--transition-base);
      }

      input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: var(--border-focus);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }

      input::placeholder, textarea::placeholder {
        color: var(--text-tertiary);
      }

      /* Tables */
      table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
      }

      thead {
        background: var(--bg-secondary);
        position: sticky;
        top: 0;
        z-index: 10;
      }

      th {
        padding: var(--space-md);
        text-align: left;
        font-size: 12px;
        font-weight: 600;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border-bottom: 1px solid var(--border-color);
      }

      td {
        padding: var(--space-md);
        border-bottom: 1px solid var(--border-color);
        color: var(--text-primary);
      }

      tr:hover td {
        background: rgba(255, 255, 255, 0.03);
      }

      /* Badges */
      .badge {
        display: inline-flex;
        align-items: center;
        padding: var(--space-xs) var(--space-md);
        border-radius: var(--radius-full);
        font-size: 12px;
        font-weight: 500;
        background: rgba(255, 255, 255, 0.1);
        color: var(--text-secondary);
      }

      .badge.success {
        background: rgba(16, 185, 129, 0.15);
        color: var(--success);
      }

      .badge.error {
        background: rgba(239, 68, 68, 0.15);
        color: var(--error);
      }

      .badge.warning {
        background: rgba(245, 158, 11, 0.15);
        color: var(--warning);
      }

      /* Scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
      }

      ::-webkit-scrollbar-track {
        background: transparent;
      }

      ::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.2);
        border-radius: var(--radius-full);
      }

      ::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      /* Animation */
      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .panel.active {
        animation: slideUp var(--transition-base);
      }

      /* Theme option styles */
      .theme-option {
        flex: 1;
        padding: var(--space-lg);
        display: flex;
        align-items: center;
        gap: var(--space-md);
        border: 2px solid var(--border-color);
        background: var(--bg-secondary);
        transition: all var(--transition-base);
      }
      .theme-option:hover {
        border-color: var(--accent-primary);
        background: var(--bg-tertiary);
        transform: translateY(-2px);
      }
      .theme-option.active {
        border-color: var(--accent-primary);
        background: rgba(59, 130, 246, 0.1);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
      }
      .theme-option svg {
        flex-shrink: 0;
      }
      .theme-option div {
        text-align: left;
      }
    </style>
  </head>
  <body>
    <div class="titlebar">
      <div class="titlebar-title">
        <div class="titlebar-logo"></div>
        Vea Console
      </div>
      <div class="titlebar-controls">
        <div class="titlebar-button" id="minimize-btn">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor">
            <rect x="0" y="5" width="12" height="2"/>
          </svg>
        </div>
        <div class="titlebar-button" id="maximize-btn">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1">
            <rect x="1" y="1" width="10" height="10"/>
          </svg>
        </div>
        <div class="titlebar-button close" id="close-btn">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="1.5">
            <line x1="1" y1="1" x2="11" y2="11"/>
            <line x1="11" y1="1" x2="1" y2="11"/>
          </svg>
        </div>
      </div>
    </div>
    <div class="app-container">
    <aside class="sidebar">
      <div class="brand">Vea Console</div>
      <nav class="menu" id="menu">
        <button data-target="panel-home" class="active">主页</button>
        <button data-target="panel1">节点</button>
        <button data-target="panel2">配置</button>
        <button data-target="panel3">核心组件</button>
        <button data-target="panel4">流量策略</button>
        <button data-target="panel-settings">设置</button>
      </nav>
    </aside>
    <main>
      <div id="status" class="status-bar"></div>

      <section id="panel-home" class="panel active">
        <header class="panel-header">
          <div>
            <h2>主页</h2>
            <p>总览当前代理状态与选中节点的实时信息。</p>
          </div>
        </header>

        <div class="card status-card">
          <div class="status-card-body">
            <h3>代理控制</h3>
            <div class="status-line">
              <span id="proxy-status" class="badge warn">未安装</span>
              <span id="proxy-status-desc" class="muted">尚未检测到可用核心，请先安装。</span>
            </div>
            <p class="muted note">该控制区会自动安装缺失核心、启动 Xray 并配置系统代理，忽略主机列表可在“设置”中调整。</p>
          </div>
          <div class="status-card-actions">
            <button type="button" class="primary" id="proxy-toggle" data-mode="">启动代理</button>
          </div>
        </div>

        <div class="card home-node-card">
          <h3>当前节点</h3>
          <div class="home-node-grid">
            <div>
              <span class="muted">名称</span>
              <div id="home-node-name">-</div>
            </div>
            <div>
              <span class="muted">地址</span>
              <div id="home-node-address">-</div>
            </div>
            <div>
              <span class="muted">延迟</span>
              <div id="home-node-latency">~</div>
            </div>
            <div>
              <span class="muted">带宽</span>
              <div id="home-node-speed">~</div>
            </div>
            <div>
              <span class="muted">最后探测</span>
              <div id="home-node-updated">-</div>
            </div>
          </div>
        </div>
      </section>

      <section id="panel1" class="panel">
        <header class="panel-header">
          <div>
            <h2>节点管理</h2>
            <p>注册节点、跟踪探测结果并处理流量统计。标签用逗号分隔，协议输入遵循后端定义（vless、trojan、shadowsocks、vmess）。</p>
          </div>
          <div class="panel-actions">
            <span id="xray-state" class="badge">未安装</span>
            <button type="button" id="node-refresh" class="ghost">刷新</button>
          </div>
        </header>

        <div class="card node-toolbar">
          <div class="node-toolbar-left">
            <button type="button" id="node-add-button" class="add-node-button" title="新增节点">+</button>
          </div>
          <div class="node-toolbar-actions">
            <button type="button" id="node-bulk-ping" class="ghost">全部延迟</button>
            <button type="button" id="node-bulk-speed" class="ghost">全部测速</button>
          </div>
        </div>

        <div id="node-tabs" class="node-tabs"></div>

        <div id="node-grid" class="node-grid">
          <div class="empty-card">加载中…</div>
        </div>
      </section>

      <div id="node-modal" class="modal">
        <div class="modal-backdrop"></div>
        <div class="modal-content card">
          <button type="button" class="modal-close" id="node-modal-close" aria-label="关闭">&times;</button>
          <form id="node-form" class="form-grid modal-form">
            <h3 style="grid-column: 1 / -1; margin-bottom: 8px;">新增节点</h3>
            <label style="grid-column: 1 / -1">
              分享链接（vmess/vless/trojan）
              <input name="shareLink" type="text" placeholder="vmess://..." />
            </label>
            <label>
              名称
              <input name="name" type="text" placeholder="如：东京 01" />
            </label>
            <label>
              地址
              <input name="address" type="text" placeholder="example.com" />
            </label>
            <label>
              端口
              <input name="port" type="number" min="1" max="65535" value="443" />
            </label>
            <label>
              协议
              <select name="protocol">
                <option value="vless">vless</option>
                <option value="trojan">trojan</option>
                <option value="shadowsocks">shadowsocks</option>
                <option value="vmess">vmess</option>
              </select>
            </label>
            <label>
              标签（逗号分隔）
              <input name="tags" type="text" placeholder="premium,asia" />
            </label>
            <div class="form-actions modal-actions">
              <button type="reset" class="ghost" id="node-modal-reset">清空</button>
              <button type="submit" class="primary">保存节点</button>
            </div>
          </form>
        </div>
      </div>

      <section id="panel2" class="panel">
        <header class="panel-header">
          <div>
            <h2>配置中心</h2>
            <p>导入 xray 等配置，支持直接粘贴 payload 或提供 sourceUrl 自动抓取；后台会按 `autoUpdateIntervalMinutes` 定期刷新。</p>
          </div>
          <div class="panel-actions">
            <button type="button" id="config-refresh" class="ghost">刷新</button>
          </div>
        </header>

        <form id="config-form" class="card form-grid">
          <h3>新增配置</h3>
          <label>
            名称
            <input name="name" type="text" placeholder="如：东京入口" required />
          </label>
          <label style="grid-column: 1 / -1">
            源/订阅链接
            <input name="sourceUrl" type="url" placeholder="https://example.com/config.json 或订阅地址" required />
          </label>
          <label>
            自动更新间隔（分钟）
            <input name="autoUpdateInterval" type="number" min="0" value="60" />
          </label>
          <label style="grid-column: 1 / -1">
            Payload（可选，用于粘贴本地配置）
            <textarea name="payload" placeholder="{ &quot;outbounds&quot;: [] }"></textarea>
          </label>
          <div class="form-actions">
            <button type="reset" class="ghost">重置</button>
            <button type="submit" class="primary">添加配置</button>
          </div>
        </form>

        <div class="card table-container">
          <table id="config-table">
            <thead>
              <tr>
                <th>名称</th>
                <th>格式</th>
                <th>更新间隔</th>
                <th>上次同步</th>
                <th>状态</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="6" class="empty">加载中…</td></tr>
            </tbody>
          </table>
        </div>
      </section>

            <section id="panel3" class="panel">
        <header class="panel-header">
          <div>
            <h2>核心组件</h2>
            <p>管理 Xray 内核的下载与更新，所有内容解压到 <code>artifacts/core</code>，安装时会自动覆盖旧版本。</p>
          </div>
        </header>

        <div class="card">
          <h3>内核管理</h3>
          <div class="component-buttons">
            <div class="button-group">
              <button type="button" class="primary ensure-component" data-kind="xray">安装 / 更新 Xray</button>
              <button type="button" id="component-refresh" class="ghost">刷新列表</button>
            </div>
            <span class="muted">按钮会自动补齐缺失的组件记录，并从 GitHub Release 拉取最新版本。</span>
          </div>
          <div class="table-container">
            <table id="component-table">
              <thead>
                <tr>
                  <th>名称</th>
                  <th>类型</th>
                  <th>版本</th>
                  <th>安装目录</th>
                  <th>上次安装</th>
                  <th>状态</th>
                  <th>操作</th>
                </tr>
              </thead>
              <tbody>
                <tr><td colspan="7" class="empty">暂无组件</td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>


      <section id="panel4" class="panel">
        <header class="panel-header">
          <div>
            <h2>流量策略</h2>
            <p>配置默认出口、DNS 方案以及分流规则。DNS 服务器可使用逗号或换行分隔。</p>
          </div>
          <div class="panel-actions">
            <button type="button" id="traffic-refresh" class="ghost">刷新</button>
          </div>
        </header>

        <form id="profile-form" class="card form-grid">
          <h3>默认出口与 DNS</h3>
          <label>
            默认节点 ID（可留空）
            <input name="defaultNodeId" type="text" placeholder="节点 ID" />
          </label>
          <label>
            DNS 策略
            <input name="dnsStrategy" type="text" placeholder="ipv4-only / prefer-ipv6 ..." />
          </label>
          <label style="grid-column: 1 / -1">
            DNS 服务器
            <textarea name="dnsServers" placeholder="8.8.8.8, 1.1.1.1"></textarea>
          </label>
          <div class="form-actions">
            <button type="submit" class="primary">保存配置</button>
          </div>
        </form>

        <form id="rule-form" class="card form-grid">
          <h3>新增分流规则</h3>
          <label>
            名称
            <input name="name" type="text" placeholder="Netflix" required />
          </label>
          <label>
            目标（逗号分隔）
            <input name="targets" type="text" placeholder="netflix.com, netflixcdn.com" required />
          </label>
          <label>
            节点 ID
            <input name="nodeId" type="text" placeholder="节点 ID" required />
          </label>
          <label>
            优先级（数字，越大越优先）
            <input name="priority" type="number" value="10" />
          </label>
          <div class="form-actions">
            <button type="reset" class="ghost">重置</button>
            <button type="submit" class="primary">添加规则</button>
          </div>
        </form>

        <div class="card table-container">
          <table id="rule-table">
            <thead>
              <tr>
                <th>名称</th>
                <th>节点</th>
                <th>目标</th>
                <th>优先级</th>
                <th>更新时间</th>
                <th>操作</th>
              </tr>
            </thead>
            <tbody>
              <tr><td colspan="6" class="empty">加载中…</td></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section id="panel-settings" class="panel">
        <header class="panel-header">
          <div>
            <h2>设置</h2>
            <p>管理应用主题、系统代理及忽略主机列表。</p>
          </div>
        </header>

        <div class="card" id="theme-settings-card">
          <h3>外观主题</h3>
          <p class="muted">选择你喜欢的应用主题，设置会自动保存。</p>
          <div class="form-grid">
            <div style="grid-column: 1 / -1; display: flex; gap: var(--space-md); margin-top: var(--space-md);">
              <button type="button" class="theme-option" id="theme-dark" data-theme="dark">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                </svg>
                <div>
                  <div style="font-weight: 500;">深色模式</div>
                  <div style="font-size: 12px; opacity: 0.7;">适合夜间使用</div>
                </div>
              </button>
              <button type="button" class="theme-option" id="theme-light" data-theme="light">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <circle cx="12" cy="12" r="5"/>
                  <line x1="12" y1="1" x2="12" y2="3"/>
                  <line x1="12" y1="21" x2="12" y2="23"/>
                  <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                  <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                  <line x1="1" y1="12" x2="3" y2="12"/>
                  <line x1="21" y1="12" x2="23" y2="12"/>
                  <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                  <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                </svg>
                <div>
                  <div style="font-weight: 500;">浅色模式</div>
                  <div style="font-size: 12px; opacity: 0.7;">适合白天使用</div>
                </div>
              </button>
            </div>
          </div>
        </div>

        <div class="card" id="system-proxy-card">
          <h3>系统代理</h3>
          <p class="muted">指向 <code>127.0.0.1:38087</code> 的 SOCKS5 代理，本机地址会被自动忽略。</p>
          <div class="form-grid">
            <p class="muted" style="grid-column: 1 / -1">代理开关已移动到“主页”，此处仅维护忽略主机列表。</p>
            <label style="grid-column: 1 / -1">
              忽略主机（每行一个）
              <textarea id="system-proxy-ignore" placeholder="localhost
127.0.0.0/8
::1"></textarea>
            </label>
            <div class="form-actions">
              <button type="button" class="ghost" id="system-proxy-reset">恢复默认</button>
              <button type="button" class="primary" id="system-proxy-save">保存</button>
            </div>
          </div>
        </div>
      </section>

    </main>
    <script type="module" src="app.js"></script>
  </body>
</html>
