# 技术设计: 修复订阅名显示错误（Issue #53/#42）

## 技术方案

### 核心技术
- 前端：`frontend/theme/_shared/js/app.js`（原生 JS）
- 后端 API：复用既有 `GET /configs`

### 实现要点

- 根因是 `formatSubscriptionLabel()` 依赖 `configsCache`，但首次进入「节点」面板时并不会触发 `loadConfigs()`，导致映射缺失而回退显示 `sourceConfigId`（UUID）。
- 在「节点」面板加载流程中补齐 `loadConfigs()` 调用，并引入“配置已加载”状态：
  - 当配置未加载完成时：订阅分组标题显示友好占位（避免 UUID）
  - 当配置已加载完成但仍找不到对应订阅：回退显示 `sourceConfigId`（更符合排障需要）
- `loadConfigs()` 成功后会调用 `renderOrUpdateNodesPanel(nodesCache)`，可自动触发节点面板重渲染，从而完成订阅名的自动刷新，无需用户切换面板。

## 安全与性能

- **安全:** 不涉及敏感信息；不新增日志输出；不引入新依赖。
- **性能:** 仅增加一次 `/configs` 的调用时机（进入「节点」面板时）；并使用“已加载”标记避免无意义重复加载。

## 测试与部署

- **手动验证（关键路径）:**
  1. 启动应用后直接进入「节点」面板
  2. 确认订阅分组标题显示订阅名（或短暂占位后自动更新为订阅名），不再需要切换面板
- **自动化/构建检查:**
  - 后端侧：`go test ./...`（确保改动不影响后端构建与测试）
