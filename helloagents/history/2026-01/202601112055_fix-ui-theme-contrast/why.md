# 变更提案: 修复 Windows 下主题 UI 颜色对比度异常（Issue #39）

## 需求背景

Issue #39（Windows 10 x64 22H2，Vea 2.3.0 Release，sing-box）反馈：主题页在若干下拉/列表控件中出现“文字与底色相同”的情况，导致内容不可读、交互不可用（截图表现为白底 + 浅色文字/仅选中项可读）。

该问题在 Windows 的 Chromium 原生表单控件（如 `<select>` 下拉、列表框）上更易出现：控件弹出层/列表往往跟随系统浅色配色，而页面文字颜色跟随主题（深色主题为浅色文字），从而造成对比度严重不足。

## 变更内容

1. 为内置主题补齐 `color-scheme`（dark/light），让 Chromium 表单控件按主题渲染（下拉列表/列表框背景与文字对比正常）。
2. 补齐浅色主题中被使用但未定义的 CSS 变量（如 `--bg-secondary`、`--border-color` 等），避免部分组件因变量缺失退回到浏览器默认样式而出现不一致。
3. 增加回归检查清单（Windows 优先），覆盖路由规则相关下拉、模板选择等高频入口。

## 影响范围

- **模块:** `frontend/theme/*`
- **文件（预估）:**
  - `frontend/theme/dark/css/main.css`
  - `frontend/theme/light/css/main.css`
  - （如需更稳健兼容）`frontend/theme/dark/index.html`、`frontend/theme/light/index.html`（增加 `meta name="color-scheme"`）
- **API:** 无
- **数据:** 无

## 核心场景

### 需求: 下拉/列表可读且可用
**模块:** frontend/theme

#### 场景: 路由规则面板的去向选择下拉
打开“路由规则”，展开/点击去向选择控件（下拉列表弹出）。
- 预期结果：下拉列表背景与文字具有足够对比度，未选中项可读；选中态样式正常。

#### 场景: 模板/节点等列表选择控件
打开相关弹窗或列表选择控件（可能为 `<select size>` 或类似原生列表框）。
- 预期结果：列表背景与文字具有足够对比度；滚动与高亮可用。

### 需求: 主题一致性（浅色/深色）
**模块:** frontend/theme

#### 场景: 切换到浅色主题后控件仍可读
切换主题为 light（或启动时加载 light），重复以上交互。
- 预期结果：浅色主题下控件保持浅色风格且对比度正常，不出现“浅字浅底/深字深底”的反差问题。

## 风险评估

- **风险:** `color-scheme` 可能影响滚动条/表单控件的默认渲染，在不同平台表现略有差异。
  - **缓解:** 仅在主题作用域内设置（dark/light 各自固定），并在 Windows/macOS/Linux 做最小回归。
- **风险:** 外部导入主题未设置 `color-scheme` 仍可能出现类似问题。
  - **缓解:** 先修复内置主题；若后续仍反馈，可考虑在 Electron 层按当前主题设置 `nativeTheme.themeSource` 或在主题包规范中明确要求。

