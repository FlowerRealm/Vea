# 变更提案: 修复 sing-box TUN 模式 DNS 断网（默认改用 DoH）

## 需求背景
在 Linux（如 Ubuntu 24.04）启用 TUN + sing-box 后，部分环境会出现“用一段时间后突然没网”的现象：IP 直连仍可达（例如 `ping 1.1.1.1` 成功），但域名解析失败（例如 `ping google.com` 解析超时）。

该现象的关键特征是 **DNS 卡死** 而非整体链路中断：系统进入“只能访问已知 IP，无法解析域名”的状态。

## 根因分析（结论）
当前默认配置里，sing-box 的 `dns-remote` 使用 `tcp` 方式访问 `8.8.8.8:53`（并通过 `detour` 走代理出站）。

现实里很多节点/VPS/网络出口会对 **53 端口**（UDP/TCP）做出站限制或限流（防滥用/防开放解析器），导致 DNS 请求长时间超时。随着缓存过期，系统层面会逐步表现为“突然断网”。

## 变更目标
- 默认情况下避免使用 53 端口作为远程 DNS 出站；
- 保持“远程 DNS 走代理 detour”的语义，减少污染与劫持风险；
- 通过单元测试锁定默认配置，防止回归。

## 影响范围
- **模块:** backend（sing-box 配置生成）
- **文件:** 见 task.md 清单
- **数据/API:** 无对外字段变更，仅配置生成内容变化

